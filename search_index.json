[["Documentation.html", "1 Dashboard Benutzeranleitung [Deutsch] 1.1 Version 1.2 ICOtronic System Komponenten 1.3 Software- und Netzwerkeinstellungen des Computers 1.4 Echtzeit-Dashboard 1.5 Parameter 1.6 Modi 1.7 Anwendungsbeispiel 1.8 Nutzen des OPCUA-Server der SPU 2 Dashboard user manual [English] 2.1 Version 2.2 ICOtronic System components 2.3 Software and network Settings for your PC 2.4 Real-Time-Dashboard 2.5 How to use the OPCUA-server of the SPU", " 1 Dashboard Benutzeranleitung [Deutsch] Benutzeranleitung für ICOcrt Dashboard 1.1 Version Diese Benutzeranleitung wurde für die Dashboardversion v4.0.1.4 geschrieben. Für ältere Versionen den nachstehenden Link benutzen: https://github.com/MyTooliT/Dashboard/blob/older_than_4_0_1_4/C-RIO%20Dashboard%20de.md 1.2 ICOtronic System Komponenten Die nachfolgende Grafik verleiht einen Überblick über die Komponenten des ICOtronic System. Die Hauptbestandteile sind: Sensory Tool Holder (STH) Signal Processing Unit (SPU) Stationary Transceiver Unit (STU) Charging Cradle (CC) 1.3 Software- und Netzwerkeinstellungen des Computers Es wird ein Computer mit Windows Betriebssystem (Windows 7 Servicepack 1; Windows 8.1 Update 1; Windows 10) und Administratorrechten benötigt. Auf diesem Computer muss „LabView Runtime“ installiert sein. Download Link: http://www.ni.com/download/labview-run-time-engine-2018/7383/en/ ACHTUNG: Es muss die 2020 SP1 (32-bit) Version gewählt werden !!! Nicht jeder Browser unterstützt dieses Plugin. Microsoft Edge funktioniert, solange die Dashboard Seite im “Internet Explorer Modus” geöffnet wird. Alternativ kann auch das ICOtronicRemotePanel Programm verwendet werden. Bevor der Computer mittels Ethernet Kabel mit der SPU verbunden wird, müssen die Netzwerkeinstellungen des Computers eingestellt werden. Dafür muss die IP-Adresse des Computers, welcher mit der SPU verbunden wird, folgendermaßen eingestellt werden. Anschließend, sofern notwendig, sollte der Computer neu gestartet werden. 1.4 Echtzeit-Dashboard Öffnen Sie den Microsoft Edge und geben sie folgende Adresse ein: http://192.168.1.115:8000/ICOtronicSPU.html Sollte sich das Dashboard nicht öffnen überprüfen sie ob die Seite im “Internet Explorer Modus” geöffnet wurde. Nun sollte sich das Echtzeit Dashboard auf Ihrem Computer öffnen. Wenn das “ICOtronicRemotePanel” verwendet wird, öffnen sie das Programm. Nun sollte sich das folgende Fenster öffnen und nach der IP-Adresse des Dashboards fragen. Hier muss folgende IP-Adresse angegeben werden: 192.168.1.115 Durch drücken von “connect to SPU” sollte das Dashboard geöffnet werden. Das Dashboard verfügt über 4 Reiter: Stability, Breakout detection, Raw data view und System. Oberhalb der Reiter befindet sich, egal welcher Reiter gewählt ist, eine Anzeige zum Verbindungsstatus des Systems, ein Feld in dem der name und die MAC-Adresse des momentan verbundenen Werkzeughalters angezeigt wird und das ICOTronic-Logo. Wenn das System mit einem sensorischen Werkzeughalter verbunden ist, ändert sich die Farbe der Verbindungsanzeige zu Blau. Wenn die Verbindung getrennt wird, ändert sich die Farbe wieder zu Weiß. &lt;——-&gt; Wenn kein Werkzeughalter verbunden ist sind die Felder für Rufname und MAC-Adresse leer. Bei Verbindung mit einem Werkzeughalter wird der Rufname und die MAC-Adresse angezeigt bis die Verbindung zum Werkzeughalter wieder getrennt wird. &lt;——-&gt; 1.4.1 System Reiter Im Untermenü “Holder connection” des System Reiters befindet sich eine Liste aller sensorischen Werkzeughalter, die in der Umgebung des Systems gefunden wurden, mit denen sich das System verbinden kann. Zu sehen sind der Name und die Bluetooth Adresse dieser STHs. Es gibt 3 Möglichkeiten einen Halter mit dem System zu verbinden. Die benutzte Methode kann im Untermenü “Connection type” mittels Drop-Down Auswahl gewählt werden und mittels des “Update” Buttons aktiviert werden. Auf der rechten Seite befinden sich ein paar Graphen mit System Informationen. Unten links befindet sich ein Untermenü mit mehreren Reitern für spezielle Anwendungen. 1.4.1.1 Logging Dieser Reiter kann benutzt werden um einen Prozess aufzuzeichnen. Wenn die Checkbox markiert ist startet die Aufnahme in dem Moment wenn sich das System mit einem Halter verbindet. Wenn die Checkbox nicht markiert ist kann Aufnahme durch Drücken des “Start Recording” Buttons gestartet werden. Dieser Button wird während einer Aufnahme zu einem “Stop Recording” Button mit dem die Aufnahme beendet werden kann. Die 2 Identifikatoren unterhalb zeigen an ob ein Speichergerät wie z.B. ein USB-Stick verbunden ist und ob gerade eine Aufnahme stattfindet. Die beiden Anzeigen am unteren Ende zeigen an, wie Groß die aktuelle Aufnahme Datei ist und wie viel freier Speicher auf dem angeschlossenen Speichermedium zur Verfügung steht. 1.4.1.2 Replay Dieser Reiter wird verwendet um sich aufgenommene Prozesse anschauen zu können. Wenn ein Speichermedium angeschlossen ist zeigt die Liste alle aufgenommenen Prozesse auf diesem Medium an. Wenn eine Aufnahme ausgewählt ist kann diese mittels eines Drucks auf den “Load File” Button eingelesen werden. Um das System zwischen dem Live Mode und dem Wiedergeben eines aufgenommenen Prozesses zu wechseln muss nur der “Live mode” Button betätigt werden. Nach Laden des Recordings wird ein gesamter Zeitverlauf oberhalb der Reiterauswahl angezeigt. Mittels druck auf den “Run” Button kann dieser nun gestartet werden. 1.4.1.3 FOCAS Achtung: Diese Art der Verbindung ist nur auf spezifischen Maschinen möglich! Dieser Reiter kann benutzt werden um das System mittels der FOCAS Schnittstelle zu steuern. Für diese Art der Kontrolle muss dem System die NC-Startzeile und die NC-Endzeile des zu regelnden Prozesses gegeben werden. Um die Kontrolle über FOCAS einzuschalten muss diese nach Eingabe der NC-Zeilen mittels eines Drucks des “FOCAS Start” Buttons aktiviert werden. Um die Kontrolle über FOCAS wieder zu deaktivieren muss der “FOCAS Stop” Button gedrückt werden welcher den “FOCAS Start” bei aktiver Kontrolle ersetzt. 1.4.1.4 System Dieser Reiter zeigt Informationen über die empfangenen CAN-Nachrichten des Systems an. 1.4.1.5 Verbindungsarten 1.4.1.5.1 Dashboard / OPC UA Um sich mit einem Halter zu verbinden, muss der gewünschte Halter aus der “Device list” gewählt werden und danach der „Connect“ Button gedrückt werden. Mit dem „Stop“ Button kann die Verbindung zum aktuell verbundenen Halter getrennt werden. Nach Trennen einer Verbindung benötigt das Dashboard einige Sekunden, bevor es wieder nach Haltern sucht und diese listen. 1.4.1.5.2 Static / DI Bei dieser Verbindungsart kann eine statische MAC-Adresse angegeben werden. Jeder sensorische Halter besitzt eine eindeutig, einmalige MAC-Adresse. Die MAC-Adresse eines Halters kann rechts in der Halterliste eingesehen werden. Wenn diese Verbindungsart gewählt ist und der Halter mit der eingestellten MAC-Adresse in Reichweite des Systems kommt, verbindet sich dieses automatisch mit dem Halter. In neueren Versionen können bis zu 3 Halter mittels statischer MAC-Adresse gewählt werden. Welcher Halter dann verbunden werden soll kann mittels der Digitalen Eingänge 6&amp;7 auf der SPU Hardwareseitig entschieden werden. 1.4.1.5.3 First available /DI Bei dieser Verbindungsart verbindet sich das System automatisch mit dem erstbesten Halter der in die Reichweite des Systems kommt. 1.4.1.5.4 Mehrkanäliges Aufzeichnen In neueren Versionen des Dashboards können nun auch mehrere Kanäle aufgezeichnet werden. (Solange der verbundene Halter ebenfalls mehrere Kanäle aufzeichnen kann.) Die Auswahl hierfür befindet sich unterhalb der Connection Type Auswahl in Form von Radio-Buttons. 1.4.1.6 Konfigurationen für Werkzeug und Prozesse IN ENTWICKLUNG!!!! Im System Reiter unter “Rule Engine confis” und “Sensor configs” können verschiedenste Konfigurationen geladen werden. Dazu muss mittels des angeschlossenen USB-Sticks oder einer Micro-SD Karte (Formatierung ext4) eine Konfigurationsdatei (IcoConfig.xml) übertragen werden. Mit dem Button „Load config file from USB“ wird das File vom USB-Stick auf die SPU Unit geladen. Über den definierten Aufbau des XML Files, können die jeweiligen Rule Engine oder auch Sensorischen Werkzeuge konfiguriert werden. Mithilfe des „Load config“ Buttons wird die jeweilige markierte Rule Engine oder Sensor configuration aus dem zuvor geladenen File ausgelesen &amp; appliziert. Darin können nun bestimmte Rule Engine Parameter definiert werden, welche dann über einen Knopfdruck geladen werden können. Dies bringt den Vorteil mit sich, dass nicht jedes Mal nach einem Neustart oder auch bei einem Prozesswechsel die jeweiligen Parameter neu eingetippt werden müssen. Ein mögliches Beispiel sieht folgendermaßen aus: Es wird in der Konfigurationsdatei ein Sensorischer Werkzeughalter mit definierter Mac-Adresse, einkanaliger Messung und dem Connection Type 1 (Dashboard / OPC UA = 0, Static / DI = 1, First available / DI = 2), welcher einer automatischen Verbindung entspricht, definiert. Zusätzlich wird für diesen Werkzeughalter eine Stability Rule Engine mit allen Parametern zum dazugehörenden Schlichtprozess und der jeweiligen Rule config ID 5 festgelegt. Wenn diese Rule Engine ID ebenso geladen wird, werden die darin befindlichen Werte in dem Reiter Stability eingefügt. Aktuell befindet sich das Feature in der Entwicklungsphase, somit ist es noch nicht möglich, die jeweiligen Sensorischen Werkzeuge direkt in zugewiesene Zeilen der Werkzeuge für die Automatische Werkzeugauswahl anhand von Digitalen Eingängen zuzuweisen. 1.4.2 Raw Data View Reiter Wird dieser Reiter ausgewählt, werden die Rohdaten des Sensorischen Werkzeughalters, abhängig davon ob nur ein oder drei Channels ausgewählt wurden, angezeigt. Dieser dient dazu, die unverrechneten Werte der jeweiligen Eingangskanäle darzustellen. 1.4.3 Breakout detection Reiter IN ENTWICKLUNG!!!! Dieser Reiter wird benutzt, wenn man Schneidenausbrüche detektieren will. In der oberen, linken Ecke können die Parameter für die Detektion eingestellt werden. Oben, rechts befindet sich ein Graph der den Qualitätsfaktor anzeigt welcher genutzt wird um einen Schneidenausbruch zu detektieren. In der unteren, linken Ecke befindet sich ein Graph mit Informationen über die Signalenergie. Untern, rechts befindet sich noch ein Graph welcher das Frequenzspektrum anzeigt. In diesem Frequenzspektrum kann mittels der Maus die rote Linie verschoben werden. Oberhalb des Frequenzspektrums befindet sich einer Anzeige über Frequenz und Amplitude an der gewählten Stelle. Ebenso werden im Frequenzspektrum, sofern die jeweiligen Parameter eingestellt wurden (siehe nächster Absatz), grüne vertikale Balken dargestellt. Diese Balken repräsentieren die in den Parametern definierten Bereiche, welche für die Berechnung des Schneidenausbruchs-Algorithmus verwendet werden. Darin sollten sich bei einem neuen Werkzeug die Vielfachen der Zahneingriffsfrequenzen, gemessen mit dem mitrotierenden Beschleunigungssensor, abbilden. Auf der rechten Seite befinden sich 2 Schieberegler mit denen der Zoom der X-Achse(Frequenz) und der Y-Achse(Amplitude) eingestellt werden können. 1.4.3.1 Schneidenausbruchs Parameter Diese Parameter werden dazu genutzt die Detektion von Schneidenausbrüchen einstellen zu können. Um die neu eingestellten Parameter zu aktivieren muss der “Update” Button gedrückt werden. 1.4.3.1.1 Spindle speed Dieser Parameter ist die eingestellte Drehzahl des Prozesses. 1.4.3.1.2 Order limit Dieser Parameter ist die Ordnung der Schneideneingriffsfrequenz die für die Berechnung herangezogen wird. 1.4.3.1.3 Comb width Dieser Parameter gibt die Kammbreite an mit welcher das Frequenzspektrum analysiert wird. Diese ist notwendig da Frequenzen nicht nur als 1 eindeutiger Wert auftreten sondern eher in Form eines Plateaus auftreten da es sich um einen realen und keinen idealen Prozess handelt. 1.4.3.1.4 Number of teeth Dieser Parameter ist die Anzahl der Zähne die das benutzte Werkzeug besitzt. 1.4.3.1.5 Signal power limit Dieser Parameter definiert eine Signalenergie. Alles unterhalb dieses Wertes wird ignoriert. Diese Einstellung ist nötig damit das System nur dann Werte berechnet wenn das Werkzeug benutzt wird und nicht wenn es gerade nicht im Schnitt ist. Ohne diesen Wert könnte der Qualitätsfaktor einen Schneidenausbruch anzeigen selbst wenn das Werkzeug sich gerade nicht in Verwendung befindet. 1.4.4 Stability Reiter Im Stability Reiter des Dashboards können die Parameter der Regelung eingestellt, verschiedene Modi des Systems eingestellt und ein Graph der Echtzeitdaten eingesehen werden. ACHTUNG: Die Reiter Stability und System sind nicht miteinander verbunden. Sollten Einstellungen für die Regelung vorgenommen und das System vom aktuellen Halter getrennt werden, behält das Dashboard seine Einstellungen auch beim Verbinden eines neuen Halters. Die Einstellungen werden nur zurückgesetzt, wenn die SPU neu gestartet wird. Oben links kann der aktuell ausgewählte Modus gesehen werden und verändert werden (für eine genauere Beschreibung der verschiedenen Modi siehe das Kapitel „Modi“). Unterhalb der Modusauswahl befinden sich die Parameter Einstellungen (für eine genauere Beschreibung der verschiedenen Parameter siehe das Kapitel “Parameter”). Auf der rechten Seite befindet sich ein Live-Schrieb der Daten. Ebenso befindet sich hier eine Einstellung für das angezeigte Zeitfenster und eine Möglichkeit, den Schrieb zu stoppen. Der neueste Datenpunkt befindet sich auf der linken Seite des Schriebs, der Älteste auf der rechten Seite. Die Zeitangabe auf der Unterseite gibt an, wie lange der Datenpunkt zurückliegt. Wenn also zum Beispiel 5s steht, bedeutet dies, dass der Datenpunkt vor 5 Sekunden aufgetreten ist. Es gibt 3 verschiedene Graphen. 1.4.4.1 IFT-Wert Der IFT-Wert ist ein Systemparameter, mit dessen Hilfe erkannt werden kann, ob das System stabil oder instabil ist. Wenn der Modus einer der Regelungsmodi ist und der IFT-Wert über einen eingestellten Parameter hinaussteigt, stellt das System anhand eingegebener Parameter neue Werte für Vorschub und Drehzahl Overrides ein, um das System wieder stabil zu bekommen. 1.4.4.2 Overrides Der Override Graph zeigt die momentan angelegten Vorschub und Drehzahl Overrides des Systems. 1.4.4.3 Kontrollindikatoren Dieser Graph zeigt 2 Linien, Sens (Blau) und Active (Rot). Bei jenen Werten handelt es sich um digitale Signale. Bei einem Wert von 1 ist das Signal aktiv, bei einem Wert von 0 inaktiv. Der Sens Indikator gibt an, ob von der Maschine ein Signal ankommt (der M-Befehl ist gesetzt), um die Regelung des Systems einzuschalten und eine Regelung zu ermöglichen. Der Active Indikator gibt an, ob die IFT-Wert Schwelle überschritten ist und das System die Override Werte der Maschine anpasst. Der Active Indikator kann nur 1 werden wenn auch der Sens Indikator 1 ist. 1.5 Parameter Je nachdem, welcher Modus gerade aktiv geschalten ist, können unterschiedliche Parameter eingestellt werden. Um die neuen Werte der Parameter zu übernehmen muss der „update“ Button gedrückt werden, welcher sich unterhalb der Parameter befindet. Die einzige Ausnahme ist die „Window length“ Einstellung, welche im „watch“ Modus auch ohne Update in Echtzeit verändert werden kann. 1.5.1 Window length {ms} Zeitfenster Dieser Parameter gibt an, welches Zeitfenster für die Berechnung des IFT-Wertes benutzt wird. Wenn ein großes Zeitfenster gewählt wird, so reagiert das System träger auf Änderungen des Signals. Zum Beispiel wirkt sich ein einmaliger Impuls weniger auf die IFT-Wert Berechnung aus, wenn das Zeitfenster groß gewählt wird. Im „watch“ Modus kann dieser Parameter in Echtzeit verändert werden. In allen anderen Modi muss der „update“ Button geklickt werden, um Änderungen zu übernehmen. 1.5.2 Upper threshold {-} obere Schwelle Sollte der IFT-Wert die obere Schwelle überschreiten, so werden die zuvor eingestellten Overrides von der SPU angewandt. Je größer diese Schwelle gewählt wird, umso instabiler darf das System werden, bevor die Regelung eingreift. 1.5.3 Lower threshold {-} untere Schwelle Sollte der IFT-Wert die untere Schwelle unterschreiten, so regelt die SPU wieder auf 100% Vorschub und Drehzahl zurück. Dies geschieht in Folge der eingestellten Rampe. Je kleiner diese Schwelle gewählt wird, umso stabiler muss das System werden, bevor die Overrides zurückgesetzt werden. 1.5.4 Ramp {%/ms} Rampe Dieser Parameter bestimmt die Geschwindigkeit, mit der die Overrides zurückgesetzt werden. Die Overrides werden nicht sprunghaft zurückgesetzt, sondern verlaufen entlang einer Rampe zurück auf 100%. Je größer dieser Wert, umso steiler ist die Rampe und umso schneller setzt das System Vorschub und Drehzahl zurück auf 100%. Beispiel: Ein Wert von 0.01%/ms würde einer Erhöhung von Drehzahl und Vorschub um 10% innerhalb von 1 Sekunde. 1.5.5 Feed override {0-100%} Vorschub Soll-Wert Dieser Parameter wird in den Modi „Stability 2 Level“ und „Direct output“ verwendet. Dieser Wert bestimmt den Override, welcher vom System angewendet wird, sollte das ICOTronic System die Regelung des Vorschubes aktivieren. 1.5.6 Spindle override {0-100%} Drehzahl Soll-Wert Dieser Parameter wird in den Modi „Stability 2 Level“ und „Direct output“ verwendet. Dieser Wert bestimmt den Override, welcher vom System angewendet wird, sollte das ICOTronic System die Regelung der Drehzahl aktivieren. 1.5.7 Feed override min {0-100%} Minimaler Vorschub Soll-Wert Dieser Parameter wird im „Stability reduction“ Modus verwendet. Dieser Wert entspricht dem minimalen Vorschub Override, den das ICOTronic System an die Maschine senden kann. Der Override kann nicht unterhalb dieses Wertes fallen. 1.5.8 Feed reduction factor {0-100%} Vorschub Reduzierungsfaktor Dieser Parameter wird im „Stability reduction“ Modus verwendet. Dieser Wert beeinflusst die Schrittgröße, in welcher der Vorschub Override gesetzt wird. Beispiel: Ein Wert von 5% als „Feed reduction factor“ erzeugt eine Senkung des Vorschub Overrides um 5% bei jedem Berechnungsfenster, solange der IFT-Wert &gt; Obere Schwelle ist. Reduzierungsschritt 1: Reduktion von 100% auf 95% Reduzierungsschritt 2: Reduktion von 95% auf 90% … und so weiter. 1.5.9 Spindle override min {0-100%} Minimaler Drehzahl Soll-Wert Dieser Parameter wird im „Stability reduction“ Modus verwendet. Dieser Wert entspricht dem minimalen Drehzahl Override, den das ICOTronic System an die Maschine senden kann. Der Override kann nicht unterhalb dieses Wertes fallen. 1.5.10 Spindle reduction factor {0-100%} Drehzahl Reduzierungsfaktor Dieser Parameter wird im „Stability reduction“ Modus verwendet. Dieser Wert beeinflusst die Schrittgröße, in welcher der Drehzahl Override gesetzt wird. Beispiel: Ein Wert von 5% als „Spindle reduction factor“ erzeugt eine Senkung des Drehzahl Overrides um 5% bei jedem Berechnungsfenster, solange der IFT-Wert &gt; Obere Schwelle ist. Reduzierungsschritt 1: Reduktion von 100% auf 95% Reduzierungsschritt 2: Reduktion von 95% auf 90% … und so weiter. 1.5.11 Deadtime {ms} Totzeit Dieser Parameter wird nur im „Stability reduction“ Modus verwendet. Dieser Wert entspricht jener Zeit, die das System abwartet, bevor es erneut überprüft, ob eine Reduktion der Overrides erforderlich ist. Je kleiner dieser Wert, umso schneller reduziert das System den Vorschub und die Drehzahl. Als Referenzwert für erste Versuche kann eine Totzeit von 300ms gewählt werden. Dies bedeutet, dass alle 300ms der Vorschub und die Drehzahl reduziert werden, solange sich der IFT-Wert oberhalb der oberen Schwelle befindet. Beispiele: In den nachfolgenden Grafiken sind 2 verschiedene Totzeiten eingestellt, mit der kürzeren Totzeit in der ersten Grafik. Es ist zu bemerken, dass die minimalen Overrides bei kürzerer Totzeit schneller erreicht werden. Für beide Grafiken wurden dieselben Reduzierungsfaktoren und minimalen Overrides verwendet: Feed reduction factor: 8%; Feed override min: 10%; Spindle reduction factor: 5%; Spindle override min: 20% Deadtime: 100ms Deadtime: 300ms 1.5.12 IFT value factor {-} IFT-Wert Faktor Dies ist ein multiplikativer Faktor für den IFT-Wert in der korrespondierenden Grafik und dem analogen Port 0 auf der SPU (NI 9263). Mit diesem Faktor kann das Signal auf einen gewünschten Wert eingestellt werden. 1.5.13 IFT value offset {-} IFT-Wert Offset Dies ist ein additiver Faktor für den IFT-Wert in der korrespondierenden Grafik und dem analogen Port 0 auf der SPU (NI 9263). Mit diesem Faktor kann das Signal auf einen gewünschten Wert eingestellt werden. 1.6 Modi Die verschiedenen Modi sind folgende: 1.6.1 WATCH In diesem Modus sind STU und STH miteinander verbunden. Des Weiteren wird der IFT-Wert in diesem Modus berechnet, damit das generierte Signal eines Schnittes eingesehen werden kann. Dieser Modus ist aber kein Regelmodus und greift somit auch nicht in den Maschinenprozess ein. Daher ist dieser Modus dafür geeignet, die Verbindung zwischen STH und STU zu testen. In diesem Modus können der „IFT value factor“ und der „IFT value offset“ verändert werden. Dies ist der einzige Modus, in dem die „Window length“ geändert werden kann, ohne den „Update“ Button klicken zu müssen. 1.6.2 STABILITY 2 LEVEL Dies ist einer der 2 Modi, welche zur Regelung des Maschinenprozesses genutzt werdern können. Die in diesem Modus benutzten Parameter sind “Upper threshold”, “Lower threshold”, “Ramp”, “Feed override” und “Spindle override”. Sollte der IFT-Wert in diesem Modus die „Upper threshold“ überschreiten, so werden die Overrides direkt auf die zuvor im Dashboard eingestellten Werte von „Feed override“ und „Spindle override“ gesetzt. Sobald der IFT-Wert wieder unterhalb des „Lower threshold“ fällt, beginnt das System den Vorschub und die Drehzahl entlang einer Rampe wieder auf 100% zu erhöhen. Die Geschwindigkeit, mit der das System wieder auf 100% fährt, ist durch die Steilheit der Rampe gegeben. Diese ist über den Parameter „Ramp“ definiert. 1.6.3 STABILITY REDUCTION Dies ist einer der 2 Modi, welche zur Regelung des Maschinenprozesses genutzt werdern können. Die in diesem Modus benutzten Parameter sind “Upper threshold”, “Lower threshold”, “Ramp”, “Feed override min”, „Feed reduction factor“, “Spindle override min”, „Spindle reduction factor“ und „Deadtime“. Sollte der IFT-Wert in diesem Modus die „Upper threshold“ überschreiten, so reduziert das System den Vorschub und die Drehzahl entsprechend der beiden Reduzierungsfaktoren. Nach einem Reduzierungsschritt wartet das System die „Deadtime“ ab und überprüft erneut, ob der IFT-Wert weiterhin oberhalb des „Upper threshold“ liegt. Sollte er unterhalb liegen, so behält das System die aktuellen Werte bei. Sollte der IFT-Wert weiterhin oberhalb des „Upper threshold“ liegen, so werden der Vorschub und die Drehzahl wieder um einen Reduzierungsschritt gesenkt. Sollte durch die Reduzierung einer der beiden Minimalwerte erreicht werden, so wird der Vorschub beziehungsweise die Drehzahl nicht mehr reduziert. Sobald der IFT-Wert wieder unterhalb des „Lower threshold“ fällt, beginnt das System den Vorschub und die Drehzahl entlang einer Rampe wieder auf 100% zu erhöhen. Die Geschwindigkeit, mit der das System wieder auf 100% fährt, ist durch die Steilheit der Rampe gegeben. Diese ist über den Parameter „Ramp“ definiert. 1.6.4 DIRECT OUTPUT Dieser Modus wird vorrangig bei der Installation des Systems benutzt. Neben dem „IFT value factor“ und dem „IFT value offset“ können in diesem Modus „Feed override“ und „Spindle override“ eingestellt werden. Die für den Vorschub und die Drehzahl eingestellten Overridewerte werden in diesem Modus unabhängig vom aktuellen IFT-Wert direkt an die Maschine weitergegeben. Dadurch können definierte Overridewerte an die Maschine gesendet werden, ohne aktive Sensorik oder ein Aktivierungssignal der Maschine (M-Befehl). Dieser Modus sollte dafür verwendet werden, um zu überprüfen, ob die Verbindung zwischen der SPU und der Maschine ordnungsgemäß funktioniert. 1.7 Anwendungsbeispiel Öffnen Sie den Internet Explorer und verbinden Sie sich mit dem Dashboard. Wenn die Seite fertig geladen ist, wechseln Sie zu dem „System“ Reiter und waren Sie darauf, dass der Halter welcher gerade in der Maschine eingespannt ist, in der Liste aufscheint. Drücken Sie nun den „Connect“ Button und wechseln Sie zu dem „Stability“ Reiter. Die LED des Halters sollte nun anfangen zu blinken und die LEDs in den Ecken der STU sollten von grünem Blinken auf grünes Dauerleuchten wechseln. Nach einigen Sekunden sollte der IFT-Werte Graph Werte anzeigen, die ungleich 0 sind. Wechseln Sie den Modus auf „Watch“ und stellen Sie für einen ersten Test die „Window length“ auf etwa 70ms ein. Ändern Sie die „Graph History“ auf einen gewünschten Wert (am besten stellen Sie eine Zeit ein, welche etwas länger ist als der zu testende Schnittprozess). Nun fahren Sie einen Schnittprozess mit ausgeschalteter Regelung des Systems und betrachten Sie den IFT-Wert. Für eine bessere Begutachtung des Signals ist es zu empfehlen, nach Abschluss des Prozesses den „pause graph“ Button zu drücken und das Signal zu stoppen. Zur Erinnerung: Die Sekundenangabe unterhalb des Graphen zeigt an, wie viel Zeit seit diesem Datenpunkt verstrichen ist. Die nachfolgende Abbildung zeigt ein Beispiel eines Schnittprozesses im Watch Modus. Nun ändern Sie den Modus auf einen der beiden Regelmodi und stellen sie die Parameter von „Upper threshold“ und „Lower threshold“ auf plausible Werte für eine adaptive Regelung. Wiederholen Sie nun den Schnittprozess mit eingeschalteter Regelung des Systems. Sollten die Parameter noch nicht optimal eingestellt sein, so passen Sie diese nun entsprechend an und wiederholen Sie den Schnittprozess. Die benötigte Zeit, um die Einstellungen für einen gegebenen Schnittprozess optimal einzustellen, kann variieren. Die benötigte Zeit ist abhängig von der Intensität des Ratterns, der Schnittdauer, der Erfahrung des Dashboard Bedieners bezüglich der Einstellungen und der Erfahrung des Maschinenbedieners. Dieser Optimierungsprozess kann durchaus länger als eine Stunde dauern. 1.8 Nutzen des OPCUA-Server der SPU 1.8.1 Verbinden mit dem OPCUA-Server Um den OPCUA-Server nutzen zu können wird als erstes ein OPCUA-Client benötigt. Hierzu muss einer auf dem Computer installiert werden. Wir empfehlen UaExpert und haben auch alle Bilder dieser Anleitung mit UaExpert erstellt. Der Client(UaExpert v1.5.1) kann unter nachstehendem Link gedownloadet werden. Zu beachten ist das ein User-Account benötigt wird. Download link: https://www.unified-automation.com/downloads/opc-ua-clients.html Nach erfolgreicher Installation muss der Client gestartet werden indem das Programm geöffnet wird.Wenn das Programm geöffnet ist muss man im Menü auf „Server“ und „Add…“ gehen um den SPU-OPCUA-Server zu suchen und sich mit diesem verbinden zu können. Hier nun im Menüpunkt „Custom Discovery“ auf den Unterpunkt „&lt; Double click to Add Server… &gt;“ doppelklicken und in dem Fenster welches sich nun öffnet folgende Adresse eingeben: Opc.tcp://192.168.1.113:49580 Nun sollte der Server gefunden werden und ein paar Unterpunkte aufklappen, wenn dieser ausgewählt wird. Wenn dies der Fall ist auf „OK“ drücken. Nun sollte der Server auf der linken Seite im Menüreiter aufscheinen. Diesen nun mit einem Rechtsklick auswählen und auf „Connect“ drücken. 1.8.2 Variablen anzeigen lassen Nun sollte im unteren linken Reiter mehrere Variablem des Servers aufgelistet sein. Nun kann durch Auswahl eines dieser Elemente (Doppelklick), dieses Element im oberen rechten Reiter geöffnet werden. In diesem Reiter können nun die Parameter des jeweiligen Elementes ausgelesen werden wie zum Beispiel der aktuelle Wert, der Variablen Identifier oder der Zeitstempel des letzten gemessenen Datenwertes. Unter „Value“ befindet sich auch der aktuelle Wert, dieses Elementes, der zuletzt eingelesen wurde. Im Falle eines einstellbaren Wertes, wie zum Beispiel dem minimalen Override der Drehzahl, kann dieser mit einem Doppelklick auch verändert werden. Zu beachten ist das Ausgangsvariablen wie zum Beispiel der aktuelle Drehzahloverride nicht geändert werden können. Um einen Parameter dauerhaft in dem großen mittleren Reiter anzuzeigen muss dieser Reiter rechtsgeklickt werden. Im folgenden Menü nun auf „Add custom node…“ klicken. Danach muss der Variablenname des Elementes angegeben werden. Jedes Element des OPCUA-Servers ist über seinen Identifier definiert und auslesbar. Dieser kann wenn das Element vorher ausgewählt wurde im rechten oberen Reiter bei den Element Parametern ausgelesen werden. Die benötigten Daten befinden sich unter dem Menüpunkt „NodeId“. Danach auf „OK“ drücken. Nun sollte das gewählte Element in der Mitte angezeigt werden. Im Falle eines einstellbaren Parameters kann dieser ebenso bei „Value“ verändert werden wie auch vorher in seinen Eigenschaften. 2 Dashboard user manual [English] User manual for the C-RIO Dashboard 2.1 Version This version of the documentation was written for the Dashboard version v4.0.1.4. For older documentation look at the following link: https://github.com/MyTooliT/Dashboard/blob/older_than_4_0_1_4/C-RIO%20Dashboard%20en.md 2.2 ICOtronic System components The graphic below provides an overview about the ICOtronic system components. It consists of the following main parts: Sensory Tool Holder (STH) Signal Processing Unit (SPU) Stationary Transceiver Unit (STU) Charging Cradle (CC) 2.3 Software and network Settings for your PC First, you need a Laptop running Windows and administrator privileges. You need the “LabView Runtime” installed on the Laptop, download link -&gt; http://www.ni.com/download/labview-run-time-engine-2018/7383/en/ CAUTION: it has to be the 2020 SP1 (32-bit) version !!! Not all browsers can use this plugin. Microsoft Edge works if you run the Dashboard tab in the “Internet Explorer Mode”. Alternatively you can also use the ICOtronicRemotePanel. When using the panel you also need to have the “LabView Runtime” installed on your device. Before connecting the Laptop via the Ethernet Cable to the SPU, the correct network settings have to be configured. Therefore, set the network configuration of the interface that is going to be used with the SPU as illustrated below. If required, please reboot your Laptop after changing the network settings. 2.4 Real-Time-Dashboard If you use Microsoft Edge open the explorer and go to: http://192.168.1.115:8000/ICOtronicSPU.html If the Dashboard doesn’t open check if you are opening the side in the “Internet Explorer Mode”. This should open the real-time-Dashboard on your PC. If you use the “ICOtronicRemotePanel” then open the program. Now it will open the following window in which you have to input the IP-Address of the Dashboard. The input should be: 192.168.1.115 With a press on “connect to SPU” the program should connect to the Dashboard. The Dashboard contains four tabs: Stability, Breakout detection, Raw data view and System. The header of the Dashboard, which is active on all the mentioned tabs, has a Connection identifier, a field where you can see the name and MAC-Address of the connected holder and the ICOtronic-logo. If the system is connected to a sensory tool holder, the identifier turns blue. After disconnection, it turns white again. &lt;——-&gt; If no sensory tool holder is connected the fields for name and MAC-Address will be empty. When connected to a sensory tool holder the name and MAC-Address will show until disconnection. &lt;——-&gt; 2.4.1 System Tab In the section “Holder connection” of the system tab, all STHs are listed that are found by the system and are ready to connect. You can see the name and the Bluetooth address of the STHs. To establish a connection there are 3 different methods which can be used. The used method can be chosen with the “Connection type” drop-down menu and activated with the “-&gt;” button. On the right side are some system informations. On the bottom left side are two tabs for using predefined rule and sensor configurations. On the bottom right side are a few tabs with additional functions. 2.4.1.1 Logging This tab is used for recording of a process. If the “Record at connect”-button is clicked it will turn green and show that the recording will start at connection to a holder. If not it can be started with the “Start Record” button. When the system is recording this button will become a button to stop the recording. The Identifier below shows green if a USB-device is connected. Below it shows the size of the momentary recording and the free space of the mounted USB. Attention: the system only works with USB-devices formatted to FAT32-format!!! The two identifier below show if the digital inputs for recording and enabling of the rule are set by the hardware. (The digital input for recording can be used to start and stop recordings outside of the dashboard). The 3 status identifier at the bottom show if the system is recording at the moment, if the rule is allowed to change parameters and the last one shows if the system is momentary changing the overrides because of the defined rules. 2.4.1.2 FOCAS Attention: This connection is only possible on specific machines! This tab is used if you want to control the system with the FOCAS connection. For this control you have to give the system the NC line number of the start and the end of the process which should be controlled. Additionally you can define the used IP-Address of the FOCAS connection. Then start the connection with the “FOCAS Start” button. If you want to stop the control via FOCAS you have to press the “FOCAS Stop” button which is there instead of the “FOCAS Start” if the connection is active. Note that if you are connected to a holder und you press “FOCAS Start” the system will disconnect the holder and you have to connect again to the holder. 2.4.1.3 CAN Monitor This tab shows information about the CAN messages send between the system and the dashboard. The “Reboot System” button below can be used to trigger a software side reboot of the SPU. 2.4.1.4 Connection types On the left side you can choose the connection type you want to use with the drop down menu. On the right side you can see the momentary active type. By pressing the “-&gt;” button between these two you can change the active type to the chosen type. You can chose if you are using an one or 3 channel holder with the radio buttons below the list of found holders, with the exception of the “Static / DI” mode. Note that if you use the three channel option with a holder which only has one channel the other two channels will be useless signals from not connected PINs inside the holder. On the left side of the radio buttons you can see if a static connection request is set by the hardware connected digital inputs of the SPU. 2.4.1.4.1 Dashboard / OPC UA With this mode you can select the STH of your choice from the “Device list” and press “Connect”. With “Stop”, you can disconnect from the STH. After disconnection the Dashboard needs a few seconds before it starts searching for STHs again. 2.4.1.4.2 Static / DI In this connection mode you can define static MAC-Addresses. Every holder has his own unique address. This address is shown on the right side of the device list. If this mode is selected, the digital input on the hardware is set to “1” and the holder with the defined MAC-Address is in range the system will automatically connect to this holder. Up to three holders can be defined and connected via there digital inputs. The fields for configuration of the static connection mode can be found below the connection-mode selection. There are three tabs, one for each of the defined holders to configure. The upper part is used to change the parameters, the lower part (the one with the grey background) shows the momentary active state of the configuration. To write the changed configuration into the active part press the “Update” button on the top right. The “MacAdr” is the MAC-Address of the holder you want to chose. You can see the Address on the right column of the holder list. With “Channels” you can define how many channels the holder has. If there is anything beside “1” inside this box it will take it that the holder has thee channels. With a “1” the SPU will connect to it as a holder with one channel. The “Rule config ID” box can be used to set a predefined ruling configuration to be used when connecting to this holder. With a “0” it will use the parameters which are set in the “Stability” tab at the moment. With the “IFT value factor” and the “IFT value offset” you can adapt the calculated IFT-value. ##### First available /DI In this mode the system will connect to the first holder it finds within its range. When the digital input to enable the ruling is set. 2.4.1.5 Configuration of tools and processes In the system tab you can see 2 additional tabs used to load preset configurations called “Rule Engine configs” and “Sensor configs”. Pressing the “Load Rule” Button will load and apply the chosen configuration file. With this function you can define your parameters and load them via the press of a button. This has the advantage that you don’t have to manually change all the parameters of the SPU and can use different defined configurations for different holders with different processes to be used in. IN DEVELOPMENT!!!! The rules and sensor configs can be edited via the following link: http://192.168.1.115:8000/MainConfig.html The configuration is working, but the design and user friendliness is still in development! 2.4.1.6 OPC-UA Server Address On the right side, beside the rule and sensor configs you can find the OPCUA-Server address of the SPU which you need if you want to connect via OPCUA with the SPU. ### Raw Data View Tab If this tab is chosen it will show the raw data of the connected sensory tool holder, depending if 1 or 3 channels were chosen you can see 1 or 3 signals. This is used if you want to plot the raw not computed signals of the tool holder. If you right-click the y-axis you can change from auto scale mode to defined values. 2.4.2 Breakout detection Tab IN DEVELOPMENT!!!! This tab is used when you want to detect breakout of cutting edges. On the top left side are the parameters for the detection. On the top right side is the graph of the quality factor which indicates a breakout. On the bottom left side is a graph of the signal power. And on the bottom right is a graph of the frequency spectrum. In the frequency spectrum graph you can move the cursor to see the amplitude and frequency on this cursor position on the top left of the spectrum graph. If the parameters are set you can additionally see green vertical bars. These bars represent the areas used by the breakout detection algorithm based on the chosen parameters. When using a new cutting tool the multiples of the meshing frequency should be visible. On the right side you can change the zoom of the x-axis(frequency) and the y-axis(amplitude) of this graph. 2.4.2.1 Breakout parameters These parameters are used to configure the breakout detection. To activate the new parameters the “Update” button has to be clicked. 2.4.2.1.1 Spindle speed This parameter is the spindle speed which is used in the cutting process. 2.4.2.1.2 Order limit This parameter is the number of orders of the tooth passing frequency which should be used to detect the breakouts. 2.4.2.1.3 Comb width This parameter defines the comb width which is used to analyze the frequency spectrum to detect the breakouts. This is needed since the frequencies are not a peak with only 1 value but more like a plateau because we are in a real and not ideal situation. 2.4.2.1.4 Number of teeth This parameter is the number of teeth the cutting tool posses. 2.4.2.1.5 Signal power limit This value defines a signal power. Everything below this signal power will be ignored. This is needed so that the detection only works when the tool is cutting. Without the quality factor could be signaling a breakout even if the tool is not cutting at the moment. 2.4.3 Stability tab In the Stability tab, you can change the mode of the system, the parameter of the in-process control and you can view the system’s live data. CAUTION: The tabs System and Stability tab are not connected. Therefore, if you disconnect the STH, the mode and the parameter set up in the Stability tab stay the same, even if you connect a new STH. These parameters only reset when the SPU got a reset. In the upper left, you can change the active mode (For detailed descriptions of the modes, see chapter “Modes”). Below the mode selection are the configuration parameters (For detailed descriptions of the parameters, see chapter “Parameters”). Beside the mode selection you can find an indicator which shows if the system is recording at the moment. If the system is recording the indicator will turn bright green. &lt;——-&gt; On the right-hand side you can see the live data of the system, change the shown time window length (in seconds) and you can choose to stop the data-print. The newest data point is on the left-hand side. The oldest one to the right. The timeline on the bottom gives information on how many seconds ago a specific value occured. So to say, 5s means that this point is 5s in the past. The live data is categorized into three prints. 2.4.3.1 IFT-Value The IFT-Value is the system’s criteria to find out if the process is stable or instable. If the value is above a chosen threshold and an in-process control mode is selected, the system generates new setpoints for the overrides feed rate and spindle speed in order to stabilize the process again. 2.4.3.2 Overrides The override graph shows the active override values of the system. 2.4.3.3 Control indicators This graph shows the Sens and the Active lines. These are digital information. If the values are 1 they are active and if the values are 0 they are inactive. Sens indicates that the M-command is set to activate the adaptive control loop. The Active signal shows if the IFT-Value is above the given threshold and the overrides are actively changed by the system. The Active value can only become 1 if the Sens value is 1 too. 2.4.3.4 Controls for the rule There are two buttons at the bottom of the screen. The “freigabe Regler” button can be used like the digital input which activates the rule engine. If you press the button it will change the name to “Regler freigegeben” and the “Sens” graph will change to 1. If you press it again it will change it’s name back and the “Sens” graph will go back to 0. The “Reset Regler” button is only needed if the system is used in the “stop” mode. 2.4.3.5 Stability-Parameters Depending on which mode is set active, different parameters can be changed. To change said parameters to new values, press the “update” button on the bottom (with “Window length” being the only exception in “Watch” mode). 2.4.3.5.1 Window length {ms} window length This parameter changes the time window for the calculation of the IFT-Value. The larger the window, the more sluggish the system reacts to changes. For example, a single spike in the process is weighted less on the IFT-Value calculation in a larger window. In “Watch” mode this parameter can be adjusted live. In all other modes, this can only be done using the “update” button as mentioned before. 2.4.3.5.2 Upper threshold {-} upper threshold If the IFT value exceeds the threshold, the overrides are set to the defined values by the SPU. The bigger this value, the more “instable” the process is allowed to become, before override adaptions are activated. 2.4.3.5.3 Lower threshold {-} lower threshold If the IFT-value falls below the lower threshold, the override values will start rising up towards 100% again, following a defined ramp. The lower this value, the more “stable” the process has to become for the overrides to be reset. 2.4.3.5.4 Ramp {%/ms} ramp This parameter changes the speed of the override reset. The overrides are not reset instantly, as they follow a ramp to change back to 100%. The bigger this value, the steeper the ramp and the faster the system goes back to 100% spindle speed and feed rate. A value of e.g. 0.01 %/ms would increase the feed rate and/or spindle speed to 10 % within 1 second. 2.4.3.5.5 Feed override {0-100%} Setpoint for feed rate This parameter is used in the modes “Stop”, “Stability reduction”, “Stability 2 Level” and “Direct output”. In “Stability 2 Level” and “Direct output” this value defines the override applied to the machine tool control system, the moment the ICOtronic system activates the feed rate adaption of the machine. In “Stability reduction” this value defines the minimal feed rate override, which is sent to the machine by the ICOtronic system. The reduction cannot fall below this value. ##### Spindle override {0-100%} Setpoint for spindle speed This parameter is used in “Stop”, “Stability reduction”, “Stability 2 Level” and “Direct output”. In “Stability 2 Level” and “Direct output” this value defines the override applied to the machine tool control system, the moment the ICOtronic system activates the spindle speed reduction of the machine. In “Stability reduction” this value defines the minimal feed rate override, which is sent to the machine by the ICOtronic system. The reduction cannot fall below this value. 2.4.3.5.6 Feed reduction factor {0-100%} Reduction factor This parameter is used in the “Stability reduction” mode. This value controls the intensity of the reduction steps of the feed rate. As an example: A value of 5 % for “Feed reduction factor” results in continuous reduction of 5% of the override as long as the IFT-Value is bigger than the upper threshold at each calculation interval. Reduction step 1: Reduction from 100 % to 95 % Reduction step 2: Reduction from 95 % to 90 % …and so on. 2.4.3.5.7 Spindle reduction factor {0-100%} Reduction factor This parameter is used in the “Stability reduction” mode. This value controls the intensity of the reduction steps of the spindle speed. As an example: A value of 5 % for “Spindle reduction factor” results in continuous reduction of 5% of the override as long as the IFT-Value is bigger than the upper threshold at each calculation interval. Reduction step 1: Reduction from 100 % to 95 % Reduction step 2: Reduction from 95 % to 90 % …and so on. 2.4.3.5.8 Deadtime {ms} deadtime This parameter is only used in the “Stability reduction” mode. This value equals the time in ms the system pauses before checking if it should reduce the spindle speed and feed rate again. The smaller this value, the quicker the ICOtronic system reduces the speed. As a reference value for first tests 300 ms can be mentioned. This means, each 300 ms feed rate and/or spindle speed are adapted as long as the IFT value exceeds the threshold. Note: if this value is to low it can happen that the machine needs longer to set the new parameters than the system waits to see if something changed. This would have the problem that even it the process stabilises the machine still changes values from the last instance and the process gets unstable again. Examples: In the pictures below, there are 2 different Deadtimes set. The first picture has a shorter Deadtime than the second one. It can be seen that the minimal Overrides are reached quicker with a lower Deadtime. Feed reduction factor: 8%; Feed override min: 10%; Spindle reduction factor: 5%; Spindle override min: 20% Deadtime: 100ms Deadtime: 300ms 2.4.3.5.9 Channels {-} channels If you have a three channel holder you can change the channel which is used to calculate the IFT value with this drop down menu. You can use any of the three channels or multiple channels at once. If you use a one channel holder this parameter will be ignored and the IFT value calculated with the one available channel. 2.4.3.5.10 IFT value factor {-} IFT value factor This is a multiplicative factor for the IFT-Value in the corresponding diagram and for the analogue port number 0 of the SPU (NI 9263). With it, the signal can be set to a desired value. The values for the different channels can be changed separately. 2.4.3.5.11 IFT value offset {-} IFT value offset This is an additive value, to the IFT-Value in the corresponding diagram and for the analogue port number 0 of the SPU (NI9263). With it, the signal can be set to a desired offset. The values for the different channels can be changed separately. 2.4.3.6 Modes The modes are: 2.4.3.6.1 WATCH The STH and the STU are connected in this mode. Moreover, the IFT-Value will be evaluated in order to watch the signal generated in cutting processes. However, this mode is not a control mode and thus not taking any actions in the machine control system. This mode is also suitable for testing the connection between STH and STU. In this mode, the “IFT value factor” and “IFT value offset” can be changed. Furthermore, this is the only mode where you can instantly change the “Window length” without having to use the “update” button. 2.4.3.6.2 STABILITY 2 LEVEL This is one of the two modes which can be used to control the machining process. In this mode, the parameters used are the “Upper threshold”, “Lower threshold”, “Ramp”, “Feed override” and “Spindle override”. If the IFT value exceeds the “Upper threshold”, the system will directly set the overrides to the values of “Feed override” and “Spindle override” defined in the Dashboard. If the IFT value reduces and falls below the “Lower threshold”, the system will start to increase Spindle speed and Feed rate back to 100% in form of a ramp. The speed of this increase is defined by the “Ramp” parameter. 2.4.3.6.3 STABILITY REDUCTION This is one of the two modes which can be used to control the machining process. In this mode, the parameters used are the “Upper threshold”, “Lower threshold”, “Ramp”, “Feed override min”, “Feed reduction factor”, “Spindle override min”, “Spindle reduction factor” and “Deadtime”. If the IFT value exceeds the “Upper threshold”, the system will reduce spindle speed and feed rate. The factors of how much they are reduced are the two “override” factors. After a reduction step, the system waits the “Deadtime” to see if the IFT value is still above the “Upper threshold”. If it is still above, the system will reduce the overrides again. If the “override min” values are reached, the system will no longer reduce the spindle speed and feed rate. If the IFT-Value falls below the “Upper threshold”, the system holds the active overrides applied by the SPU. If the IFT-Value sinks below the “Lower threshold”, the system starts to increase spindle speed and feed rate. The speed of this increase is defined by the “Ramp” parameter. 2.4.3.6.4 DIRECT OUTPUT This mode is primary used while installing the system. Beside the “IFT value factor” and the “IFT value offset”, the “Feed override” and “Spindle override” can be changed. The values given for the overrides will be directly sent to the output, independent from the IFT-Value. Therefore, a specific spindle speed or feed rate can be applied without any sensor-input or activation signal from the machine-control-system (M-command). This mode should be used to check if the connection between the SPU and the machine-control-system is working as designed. 2.4.3.6.5 STOP This mode works nearly identical to “stability 2 level” mode. The only difference is that the system doesn’t use the lower threshold. If the system changed the overrides these overrides will stay active until ether the digital input of rule enable is reset to 0 or the “Reset Regler” button was pressed. 2.4.4 Example use-case Open the internet explorer and connect to the Dashboard. After the page is loaded, go to the “System” tab and wait for the holder inside the machine to be listed. Now press “Connect” and go to the “Stability” tab. The STH’s LED should start blinking and the STU’s LEDs in the corners should stop blinking and instead shine continuously. After a short moment, the IFT-Value graph should start to display values different from zero. Change the mode to “Watch” and choose a “Window length” with about 70 ms as a first orientation. Change the “Graph History” to a desired time window. Now, perform a cut in this watch mode with deactivated adaptive control and examine the IFT-Value. In order to take look at the whole process, press the “pause graph” button after the process. Remember that the seconds below the graphs show how many seconds in the past this point was. The following figure represents an example of cut in the watch mode. Now change to on of the two control modes and set the parameters of the “Upper threshold” and “Lower threshold” to plausible values, for the in-process parameter adaption. Repeat the cut, in which the override adaption is now activated. Look if the parameters are chosen appropriately in order to control the process. If not, change them in an adequate way. The time required to optimize the system for the use case varies. This depends on the intensity of chatter, the process time, the experience for configuring the Dashboard and the experience of the machine operator. This optimization procedure can take between one hour and several hours. 2.5 How to use the OPCUA-server of the SPU 2.5.1 Connecting the OPCUA-Server First, a OPC UA client is required on your PC. Please, find subsequently as a suggestion the download link of a UaExpert client (UaExpert v1.5.1). A user account is required. Download link: https://www.unified-automation.com/downloads/opc-ua-clients.html Afterwards open the UaExpert client-program. When the program is open you have to click on “Server” at the top menu and then on “Add…”. This opens a window to search for and connect with the OPC UA-Server of the Signal Processing Unit (SPU) of the ICOtronic system. In the new window you now have to go to the menu entry “Custom Discovery” and double click the sub menu entry „&lt; Double click to Add Server… &gt;“. Now a little new window will open. Here you have to input the following address: opc.tcp://192.168.1.113:49580 Now the server should be found and you can open some sub menu entries. Double click the “None – None (uatcp-uasc-uabinary)”. Now the “OK” button should be usable and you can click it to exit this window. After that, the server should be visible on the left side of the menu. Now you have to right-click the server and then click on “Connect”. 2.5.2 Visualisation of the variables After connecting to the OPCUA-Server you should now be able to see variables on the left side of the menu. With a double click, these variables can be opened and shown on the upper right-hand side of the menu. In this window, it is possible to read the different value parameters of the chosen element. For example, the actual value of the element or the timestamp of the last time, this element was updated. The menu entry “Value” shows the last read value of this element. If the element is editable for, example the minimal override of the spindle, you can change it by double clicking the value parameter. If the element is an output variable, for example the actual spindle override, you cannot change it. In order to show an element permanently in the middle tab of the screen, you have to right click in this tab. Now a menu should open and you have to click on „Add custom node…“. After that, you have to state the variable name of the element you want to show. Every element of the OPC UA-Server can be chosen via its identifier. If an element is selected, the identifier can be read out at the element parameters in the right upper tab. There, you can pick the entry “NodeId” and find the required information. After inputting the NodeId you can press the “OK” button. Now the chosen element should be shown in the middle part of the program. If the chosen element is an editable variable you can change it with its “Value” element directly in this list, like you could change it in the upper right menu before. It is possible to show more than one element in the middle of the screen by repeating this process. "]]
